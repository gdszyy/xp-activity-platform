# XP通用活动平台设计优化分析

**版本:** 1.0
**日期:** 2026年1月19日
**作者:** Manus AI

---

## 1. 用户反馈分析

### 1.1 核心问题

当前设计方案中，运营人员在使用活动模板时，只能通过"填空"的方式修改暴露的变量值，这种设计存在以下局限性：

1. **灵活性不足**：运营无法在模板基础上添加新的任务或奖励，只能使用模板预设的结构。
2. **配置范围受限**：活动时效性、用户范围标签等非ECA逻辑的配置项，也应该支持运营自主调整。
3. **复用性不够**：任务、奖励、用户范围标签等高频配置项，如果每次都需要从零配置，会降低效率。

### 1.2 设计目标调整

基于用户反馈，我们需要将设计目标从"单层模板+变量填空"升级为"**多层模板体系+组合式配置**"：

| 设计维度 | 原方案 | 优化方案 |
| :--- | :--- | :--- |
| **活动逻辑** | 固定的ECA流程图 | 可在模板基础上增删任务/奖励节点 |
| **任务配置** | 嵌入在活动模板中 | 独立的任务模板库，可复用 |
| **奖励配置** | 嵌入在活动模板中 | 独立的奖励模板库，可复用 |
| **用户范围** | 每次手动配置 | 独立的人群标签模板库，可复用 |
| **时效性配置** | 每次手动配置 | 支持灵活调整，可保存为预设 |

---

## 2. 多层模板体系设计

### 2.1 核心设计理念

我们将采用"**原子模板 + 组合模板**"的分层设计：

- **原子模板 (Atomic Template)**：最小粒度的可复用单元，包括任务模板、奖励模板、人群标签模板等。
- **活动模板 (Activity Template)**：由多个原子模板组合而成，定义了活动的整体逻辑框架。
- **活动实例 (Activity Instance)**：运营基于活动模板创建，可以在模板基础上增删原子模板，并填充具体参数。

### 2.2 模板层次结构

```
┌─────────────────────────────────────────────────────────┐
│                    活动实例 (Activity Instance)           │
│  - 引用活动模板                                           │
│  - 可增删任务/奖励                                        │
│  - 可调整时效性、人群范围等配置                           │
│  - 填充所有变量的具体值                                   │
└─────────────────────────────────────────────────────────┘
                            ↑ 基于
┌─────────────────────────────────────────────────────────┐
│                    活动模板 (Activity Template)           │
│  - 定义活动的整体逻辑框架                                 │
│  - 预设若干任务模板和奖励模板                             │
│  - 定义ECA流程图的基础结构                                │
│  - 暴露可配置的变量Schema                                 │
└─────────────────────────────────────────────────────────┘
                            ↑ 组合
┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐
│  任务模板         │  │  奖励模板         │  │  人群标签模板     │
│  (Task Template) │  │ (Reward Template)│  │ (Audience Template)│
│  - 任务类型       │  │  - 奖励类型       │  │  - 标签组合       │
│  - 触发条件       │  │  - 发放规则       │  │  - 筛选逻辑       │
│  - 完成条件       │  │  - 预算限制       │  │  - 预估人数       │
└──────────────────┘  └──────────────────┘  └──────────────────┘
        原子模板 (Atomic Templates)
```

### 2.3 各层模板的职责

#### 2.3.1 任务模板 (Task Template)

任务模板是定义"用户需要完成什么"的原子单元。

**核心属性：**
- **任务类型**：如"首充任务"、"累计充值任务"、"邀请好友任务"等
- **触发条件**：定义任务何时开始（如用户注册后、活动开始时）
- **完成条件**：定义任务完成的判定逻辑（如充值金额≥100）
- **周期性**：是否支持周期重置（如每日任务、每周任务）
- **暴露变量**：如充值金额阈值、邀请人数等

**示例：**
- 模板名称：首充任务模板
- 触发条件：用户首次参与活动
- 完成条件：充值金额 ≥ {min_amount}（暴露变量）
- 奖励触发：完成后触发奖励发放

#### 2.3.2 奖励模板 (Reward Template)

奖励模板是定义"用户能获得什么"的原子单元。

**核心属性：**
- **奖励类型**：如现金、红包、优惠券、积分、实物等
- **发放规则**：自动发放 / 手动领取
- **发放时机**：任务完成后立即发放 / 活动结束后统一发放
- **预算限制**：单用户限额、活动总预算、小时预算等
- **暴露变量**：如奖励金额、券面值、积分数量等

**示例：**
- 模板名称：现金红包奖励模板
- 奖励类型：现金
- 发放规则：自动发放
- 发放金额：{reward_amount}（暴露变量）
- 预算限制：单用户限领1次，活动总预算100万

#### 2.3.3 人群标签模板 (Audience Template)

人群标签模板是定义"哪些用户可以参与活动"的原子单元。

**核心属性：**
- **标签组合**：用户标签的逻辑组合（如"新用户 AND 一线城市"）
- **筛选逻辑**：包含/排除特定用户群体
- **预估人数**：基于历史数据预估的目标人群规模
- **动态更新**：是否支持人群包的动态更新

**示例：**
- 模板名称：高价值新用户
- 标签组合：注册时间≤7天 AND 首充金额≥500
- 预估人数：约5000人
- 动态更新：否

---

## 3. 设计优势

### 3.1 灵活性大幅提升

运营人员可以在活动模板的基础上：
- **增加任务**：从任务模板库中选择新的任务，插入到活动流程中
- **删除任务**：移除不需要的任务节点
- **调整奖励**：更换或新增奖励类型
- **修改人群**：快速切换目标人群标签

### 3.2 复用性显著增强

- **任务模板库**：常见任务（如首充、累充、邀请）可以一次创建，多次复用
- **奖励模板库**：标准化的奖励配置（如10元红包、50元券）可以快速应用
- **人群模板库**：常用的人群标签组合（如新用户、高价值用户）可以预设

### 3.3 配置效率大幅提高

运营人员不再需要从零配置每个活动，而是通过"**选择 + 组合 + 微调**"的方式快速完成活动创建：
1. 选择一个活动模板作为基础
2. 从原子模板库中选择需要的任务、奖励、人群标签
3. 填充具体的变量值
4. 调整时效性等通用配置
5. 预览并发布

---

## 4. 下一步工作

基于以上分析，我们需要：
1. **重新设计信息架构**：增加任务模板表、奖励模板表、人群标签模板表
2. **更新数据模型**：调整活动实例表，支持引用多个原子模板
3. **优化页面流转**：更新活动配置向导，支持原子模板的选择和组合
4. **绘制新的架构图**：反映多层模板体系的设计
